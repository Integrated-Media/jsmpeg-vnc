<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=320, initial-scale=1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Script-Type" content="text/javascript">
    <meta http-equiv="Content-Style-Type" content="text/css">
    <title>jsmpeg-vnc</title>
    <link href="joydiv/joydiv-skin-default.css" rel="stylesheet"/>
    <style>
        body.desktop .mobile-only { display: none; }
        body.mobile .desktop-only { display: none; }
    #controller{
        width:150px;
        height:150px;
        font-size:150px;//font-size is used to determine the size of arrows
    }
    </style>
</head>
<body oncontextmenu="return false">
    <canvas id="videoCanvas"></canvas>
	
    <div id='controller' class="joydiv-controller">
        <div class="joydiv-up"></div>
        <div class="joydiv-left"></div>
        <div class="joydiv-right"></div>
        <div class="joydiv-down"></div>
        <div class="joydiv-trackpad">
        <div class="joydiv-tracker"></div>
        </div>
    </div>
    <input type="text" id="direction">
</body>
	<script type="text/javascript" src="jsmpg.js"></script>
	<script type="text/javascript" src="jsmpg-vnc.js"></script>
  <script charset="UTF-8" src="joydiv/joydiv.js"></script>
  <script type="text/javascript">
    var element = document.getElementById('controller');
    var joydiv = new JoydivModule.Joydiv({'element':element});
    element.addEventListener('joydiv-changed',function(e){
      document.getElementById('direction').value = joydiv.getOneOf8Directions().name;
	  switch(joydiv.getOneOf8Directions().name) {
		case "up":
		sendKey(null, KEY_DOWN, 87);//W
		break;
		case "down":
		sendKey(null, KEY_DOWN, 83);//S
		break;
		
		case "left":
		sendKey(null, KEY_DOWN, 65);//A
		break;
		
		case "right":
		sendKey(null, KEY_DOWN, 68);//D
		break;
		
		case "up-left":
		sendKey(null, KEY_DOWN, 87);//W
		sendKey(null, KEY_DOWN, 65);//A
		break;
		
		case "up-right":
		sendKey(null, KEY_DOWN, 87);//W
		sendKey(null, KEY_DOWN, 68);//D
		break;
		
		case "down-left":
		sendKey(null, KEY_DOWN, 83);//W
		sendKey(null, KEY_DOWN, 65);//A
		break;
		
		case "down-right":
		sendKey(null, KEY_DOWN, 83);//W
		sendKey(null, KEY_DOWN, 68);//D
		break;
		
		default:
		sendKey(null, KEY_UP, 87);//W
		sendKey(null, KEY_UP, 83);//S
		sendKey(null, KEY_UP, 65);//A
		sendKey(null, KEY_UP, 68);//D
	  }
    });
  </script>
</html>
